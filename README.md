# 🏫 고등학교 교사용 및 학급 시간표 제작 프로그램

## 📝 프로그램 개요

본 프로그램은 고등학교의 복잡한 교사 배정과 학급 시간표를 자동으로 생성하는 시스템입니다. 교사별 담당 과목, 학급별 필수 및 선택 과목, 시수 제약, 연속 수업 제한 등 다양한 요구사항을 고려하여 최적의 시간표를 제공합니다.

## ⚡ 프로그램의 필요성

고등학교 시간표 작성은 다음과 같은 이유로 매우 복잡하고 어려운 작업입니다:

- 🔄 **다양한 제약 조건**: 교사 스케줄, 교실 사용, 과목별 시수 요건 등 여러 제약이 동시에 고려되어야 함
- 🧩 **선택 과목 체계**: 특히 고등학교의 다양한 선택 과목 그룹은 수작업으로 관리하기 매우 어려움
- ⚖️ **교사 부담 균형**: 교사별 연속 수업 시간 제한, 공강 시간 관리 등 효율적인 인력 운용 필요
- ⏱️ **시간 소요**: 모든 조건을 만족하는 시간표를 수작업으로 작성하는 데 많은 시간과 노력 필요

## 🌟 주요 기능

### 1. 🤖 자동 시간표 생성
- 모든 제약 조건을 고려한 교사별, 학급별 시간표 자동 생성
- 선택형 수업 그룹(선택A, 선택B, 선택C, 선택D) 지원
- 필수 과목 우선 배치 로직 적용
- 빈 교시 자동 관리 (자습 시간으로 표시 가능)

### 2. 🔒 제약 조건 관리
- 👨‍🏫 교사별 최대 연속 수업 시간 제한 (기본 3시간)
- 📊 하루 동일 과목 최대 수업 횟수 제한
- 📚 교사별, 과목별 적정 시수 관리
- 📌 고정 슬롯 지원 (창체 등 특별 활동)

### 3. 🎨 직관적인 시각화
- 시간표를 학년별, 학급별, 교사별로 구분하여 표시
- 과목 분류별 색상 구분으로 시각적 가독성 향상
  - 🟨 국어계열, 🟦 수학계열, 🟥 영어계열, ⬜ 과학계열, 🟧 사회계열 등 색상 구분
  - 🎯 선택 그룹별 색상 코드 적용
- 교사별 담당 시수 자동 계산 및 표시

### 4. 🔍 분석 및 검증
- ✅ 시수 충족도 자동 검증 및 부족 시수 표시
- 📈 교사별 연속 수업 시간 분석
- 🚫 제약 조건 위반 여부 자동 체크

## 🧰 프로그램 구조

프로그램은 다음 네 개의 주요 파일로 구성되어 있습니다:

1. **main.py**: 프로그램의 진입점으로, UI 매니저를 초기화하고 실행합니다.

2. **ui.py**: 사용자 인터페이스를 담당하는 파일입니다.
   - `VisualizationManager`: 시간표 시각화 및 색상 관리
   - `UIManager`: Streamlit 기반 UI 구성 및 사용자 상호작용 처리

3. **algorithm.py**: 시간표 생성의 핵심 알고리즘이 구현된 파일입니다.
   - `DataManager`: 수업 블록 생성 및 데이터 처리
   - `ScheduleManager`: 시간표 배치 알고리즘 구현
   - `ValidationManager`: 제약 조건 검증 및 분석
   - `TimetableManager`: 전체 시간표 생성 과정 조율

4. **data.py**: 시간표 생성에 필요한 기본 데이터가 정의된 파일입니다.

## 🧠 알고리즘 설명

### 📊 시간표 생성 프로세스 시각화


1. **초기화 단계**
   - 빈 시간표 및 교사 스케줄 생성
   - 고정 슬롯(창체 등) 미리 배치

2. **블록 생성 및 분류**
   - 교사 정보로부터 수업 블록 생성
   - 선택 그룹, 일반 선택, 개별 블록으로 분류

3. **우선순위 기반 배치**
   - 선택 그룹 블록 먼저 배치 (가장 제약이 많음)
   - 일반 선택 과목 블록 배치
   - 개별 블록 배치 (필수 과목 우선)

4. **제약 조건 검사**
   - 배치 가능한 슬롯 찾기 (모든 제약 조건 만족)
   - 무작위 슬롯 선택으로 다양한 결과 도출

5. **실패한 블록 재배치**
   - 배치하지 못한 블록 추적
   - 빈 슬롯에 재배치 시도

6. **검증 및 반복**
   - 모든 제약 조건 및 시수 요건 충족 여부 확인
   - 조건 미충족 시 처음부터 재시도 (최대 100회)

7. **후처리**
   - 고정 슬롯 확인 및 적용
   - 빈 교시 처리 (자습으로 채우기)

### 🔄 간략 알고리즘 설명

1. **랜덤 배치 + 제약 조건 검사 알고리즘**
   - 제약이 많은 순서대로 블록 배치 (선택 그룹 → 일반 선택 → 개별 블록)
   - 각 단계에서 모든 제약 조건을 동시에 확인하는 필터링 방식 적용
   - 가능한 슬롯 중 랜덤 선택으로 다양한 결과 생성

2. **핵심 제약 조건**
   - 👨‍🏫 한 교사가 동시에 두 수업을 담당할 수 없음
   - 📚 각 과목의 시수 요건을 충족해야 함
   - 🔄 교사의 연속 수업 시간은 제한값을 초과할 수 없음
   - 📌 하루에 같은 과목이 2회 이상 배치되지 않아야 함
   - 🧩 같은 선택 그룹의 모든 과목은 동시에 진행되어야 함

3. **최적화 전략**
   - 최대 100회 반복 시도하여 최적의 결과 찾기
   - 시수 부족이 가장 적은 결과를 "최선의 결과"로 저장
   - 모든 제약 조건이 충족되면 즉시 결과 채택

## 💻 사용 방법

1. 🚀 Streamlit 기반 웹 인터페이스를 통해 간편하게 사용
2. 🖱️ "시간표 생성하기" 버튼을 클릭하여 자동 생성 시작
3. 🔄 탭을 전환하여 학급별, 교사별 시간표 확인
4. 📊 "분석 정보" 탭에서 시수 충족 여부 및 제약 조건 만족 여부 확인
5. ⚙️ 빈 교시 자습 표시 옵션으로 시간표 맞춤 설정 가능

## 🚀 확장 가능성

본 프로그램은 모듈화된 설계로 다음과 같은 확장이 용이합니다:

- ➕ 새로운 제약 조건 추가 가능
- 🎨 다양한 과목 그룹 및 색상 체계 확장
- ⭐ 교사 선호도 및 가중치 시스템 도입
- 📂 외부 데이터 형식(Excel, CSV) 연동
- 🧬 유전 알고리즘 등 더 고급 최적화 기법으로 개선

## 📌 결론

본 프로그램은 고등학교의 복잡한 시간표 작성 작업을 자동화하여 교무행정의 효율성을 크게 향상시킵니다. 다양한 제약 조건을 동시에 고려하면서도 교사와 학생 모두에게 최적화된 시간표를 제공하여 학교 운영의 질적 향상에 기여합니다. 🎓✨
